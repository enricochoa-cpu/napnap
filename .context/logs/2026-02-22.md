# 2026-02-22 — Baby weight & height timeline

## Summary

- **Feature:** Timeline-based weight and height tracking per baby. Users can add, edit, and delete weight (kg) and height (cm) logs by date. Growth data is shown as area charts in the Stats view (Growth section only, or dedicated block when no sleep data).
- **DB:** Migration `20260222000000_baby_growth_logs.sql` adds `baby_weight_logs` and `baby_height_logs` (baby_id, date, value_kg/value_cm; unique per baby+date). RLS mirrors sleep_entries: owner full access; shared users read; caregivers insert/update/delete. Migration `20260222200000_drop_profiles_weight_height.sql` removes `baby_weight` and `baby_height` from `profiles`.
- **Types:** `WeightLog`, `HeightLog` in `src/types/index.ts`; `DbWeightLog`, `DbHeightLog` in `src/lib/supabase.ts`. `BabyProfile` and `DbProfile` no longer include weight/height.
- **Hook:** `useGrowthLogs({ babyId })` in `src/hooks/useGrowthLogs.ts` — fetch, add (upsert), update, delete; `getWeightWarning` / `getHeightWarning` for past-value warning (value lower than a later log).
- **UI:** Baby Detail: compact **Growth** section (latest entry + Add + "View all (N)" → expandable full list; "Show less" to collapse). `GrowthLogSheet`, `GrowthLogList`. No single weight/height on profile; onboarding no longer collects weight/height. **Stats:** Section chips (Sleep summary, Naps, Night sleep, Growth) when `hasData`; content split by section. Growth charts only in Growth section or in no-sleep block. Chip scroll: selected chip scrolls into view (center). Adaptive Y-axis for weight/height (data-driven domain, rounded steps).
- **Permissions:** `canEditGrowth` on BabyDetailView (defaults to `isOwner`); growth add/edit/delete only when writable. RLS enforces caregiver write access for shared babies.
- **i18n:** New `growth` namespace in en.json and es.json (babyWeight, babyHeight, add, kg, cm, noEntries, date, weightKg, heightCm, edit/add weight/height, weightWarning, heightWarning, deleteConfirmTitle/Description, weightOverTime, heightOverTime, noGrowthData, viewAll, showLess). Stats chip keys: `stats.chipSummary`, `stats.chipNaps`, `stats.chipNight`, `stats.chipGrowth`.

## Technical notes

- One row per (baby_id, date) per table; upsert used for add/overwrite on same date. Edit uses update by id.
- Warning: when saving a log, if there exists a log with a later date and higher value, show a non-blocking message (translation key) and allow save.
- **Removed:** Single weight/height from profiles (migration, types, useBabyProfile, BabyDetailView, BabyEditSheet, onboarding).
- **Stats fixes:** (1) Duplicate growth block removed — growth charts render only in `statsSection === 'growth'` (when hasData) or in `!hasData && growth` block. (2) Chip refs + `scrollIntoView({ inline: 'center', block: 'nearest' })` on section change so selected chip stays in view. (3) `adaptiveWeightDomain` / `adaptiveHeightDomain` helpers; `domain` on all weight/height YAxis (useMemo from logs). See lessons.md §15.
