# 2026-02-27 — Pending-invite UX: header avatar, My Babies invites, Profile menu indicator, Today empty state

## Summary

### Pending baby invite notification and navigation

- **Header avatar (Today & Sleep Log only):** Napper-style top-left avatar: baby photo (darkened) + initial, single nap-color ring; tap → Profile opened on My Babies. Shown only on `home` and `history` views. Warm dot (wake-color) on avatar when `pendingInvitations.length > 0`.
- **Profile tab:.** Same warm dot on the Profile tab icon when there are pending invites.
- **Profile menu:** Invitations removed from the menu. **My Babies** row shows a pending-task dot when there are pending invites so users know to go to My Babies for baby-related tasks.

### My Babies screen

- **Invites live in My Babies:** Pending invitations are no longer on the Profile menu. They appear as **invite cards** at the top of Baby profiles (My Babies), same card structure as baby cards: baby avatar (from owner profile when available via `baby_avatar_url` in pending-invites query), baby name, "From {ownerName}", and **Accept** / **Decline** buttons. `BabyShare` type extended with `babyAvatarUrl`; `useBabyShares` fetches it in the profiles join.
- **Baby cards:** Rounded-3xl, glass bg, nap-color border only when selected; right side is Select/Selected pill (no green fill). Subtitle reflects whether there are invites or which baby is selected.
- **SubViewHeader:** Title and subtitle centered; back arrow absolute left (same style as Napper). Applied to My Babies, Settings, Support, Stats header, and other sub-views.

### Today empty state for invited users

- When user has **no baby** and **has pending invite**, Today empty state shows: title "You have a baby invite", body about accepting to log sleep and see predictions, CTA "Review invite" → Profile menu (where they can then go to My Babies). Otherwise unchanged "Add your baby" / tap + flow.

### Today hero and Stats header

- **Today hero:** Softer styling: `var(--bg-card)`, no border, `rounded-2xl` (less bento) so it sits cleanly under the header avatar.
- **Stats:** Header title/subtitle use same typography as SubViewHeader (text-2xl, text-muted) for consistency.

## Technical notes

- **App:** `profileInitialView` state ('menu' | 'my-babies'); header avatar only rendered when `currentView === 'home' || currentView === 'history'`. `hasPendingBabyInvite` drives dot on avatar and Profile tab.
- **ProfileSection:** Passes `initialView`, `pendingInvitations`, `onAcceptInvitation`, `onDeclineInvitation` to MyBabiesView; `hasPendingInvite={pendingInvitations.length > 0}` to ProfileMenu.
- **MyBabiesView:** `InviteCard` uses `BabyAvatarPicker` when `invitation.babyAvatarUrl` is set; opacity-only entrance (no bounce). Baby cards use soft fade entrance.
- **useBabyShares:** Pending invitations select `profiles:baby_owner_id (baby_name, user_name, baby_avatar_url)` and map `baby_avatar_url` to `babyAvatarUrl` on `BabyShare`.

### i18n extraction

- Hardcoded strings moved to `en.json` and `es.json` for TodayView (empty states, hero labels, countdown, sleeping state), DayNavigator (calendar, week strip), SleepEntry/SleepList (entry variants, edit/delete), StatsView (section chips, headers, date range), useBabyProfile (loading/error states).

## Docs updated

- **CLAUDE.md:** App (header avatar, dot, initialView), TodayView (empty state invite, hero style), BabyShare type, Stats header, Profile section (SubViewHeader, ProfileMenu pending dot, MyBabiesView invite cards + baby cards).
- **MEMORY.md:** 2026-02-27 milestones (pending-invite UX, production deployment, i18n).
- **docs/plans:** 2026-02-27 baby-invite-notification-design.md and implementation plan already present from earlier in session.
